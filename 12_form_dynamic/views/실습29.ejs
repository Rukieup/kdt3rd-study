<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
   
  <!-- jquery cdn (for AJAX)-->
   <script
   src="https://code.jquery.com/jquery-3.6.1.min.js"
   integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="
   crossorigin="anonymous"
  ></script>

  <!-- axios cdn -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  
  <title>Document</title>

  <style>
    p {
      color: gray;
    }
  </style>
</head>
<body>
  <% title %>

  <h1>ì‹¤ìŠµ29. axios get íšŒì›ê°€ì…</h1>
  
  <form name="register">
    <label for="name">ì´ë¦„</label>
    <input type="text" id="name" name="name" >

    <fieldset>
      <legend>ì„±ë³„</legend>
      <input type="radio" value="male" >ë‚¨ì
      <input type="radio" value="female" name="gender">ì—¬ì
    </fieldset>

    <br>
    <fieldset>
      <legend>ìƒë…„ì›”ì¼</legend>

      <select name="birthYear" id="birthYear">
        <% for(let i = 1920; i <= 2022; i++){ %>
          <option value="<%= i %> "> <%= i %> </option>
        <%  } %>
      </select>
      <label for="birthYear">ë…„</label>

      <select name="birthMonth" id="birthMonth">
        <% for(let i = 1; i <= 12; i++){ %>
          <option value="<%= i %> "> <%= i %> </option>
        <%  } %>
      </select>
      <label for="birthYear">ì›”</label>

      <select name="birthDate" id="birthDate">
        <% for(let i = 1; i <= 31; i++){ %>
          <option value="<%= i %> "> <%= i %> </option>
        <%  } %>
      </select>
      <label for="birthYear">ì¼</label>
    </fieldset>
    
    <br>
    <fieldset>
      <legend>ê´€ì‹¬ì‚¬</legend>
      <input type="checkbox" name="travel" id="travel" >
      <label for="travel">ì—¬í–‰</label>
      <input type="checkbox" name="fashion" id="fashion">
      <label for="fashion">íŒ¨ì…˜</label>
      <input type="checkbox" name="food" id="food">
      <label for="food">ìŒì‹</label>
    </fieldset>
    
    <br>
    <button type="button" onclick="axiosGet();">íšŒì›ê°€ì…</button>
  </form> 
  <div class="result"></div>


  <h1>ì‹¤ìŠµ30. axios post ë¡œê·¸ì¸</h1>
  <p>ì•„ì´ë””ëŠ” appleì´ê³ , ë¹„ë°€ë²ˆí˜¸ëŠ” 1111ì…ë‹ˆë‹¤.</p>
  <form name="register2">
    <label for="id">ì•„ì´ë””</label>
    <input type="text" id="name" name="id" >

    <label for="pw">ë¹„ë°€ë²ˆí˜¸</label>
    <input type="password" id="pw" name="pw" >

    <button type="button" onclick="axiosPost();">ë¡œê·¸ì¸</button>
  </form>
  <div class="result2"></div>

  <script>
    const resultBox = document.querySelector('.result')

    function axiosGet () {
      console.log('##### click axiosGet ######')
      
      const form = document.forms['register'];
      console.log(form.name.value)
      const data = {
        name: form.name.value
      }

      axios({
        method: 'GET',
        url: '/axios',
        params: data,
      }).then(function (response) {
        resultBox.textContent = `${data.name}ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤! ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ğŸ‰`
        resultBox.style.color = 'blue';
      })
    }

    const resultBox2 = document.querySelector('.result2')
    function axiosPost () {
      console.log('##### click axiosPost ######')

      const form = document.forms['register2'];
      const data = {
        id: form.id.value,
        pw: form.pw.value
      }
      
      axios({
        method: 'POST',
        url: '/axios',
        data: data,
      }).then(function (response) {
        console.log(response.data)
        if(response.data.id == userId && response.data.pw == pw) {
          resultBox2.textContent = `${response.data.id}ë‹˜! ë¡œê·¸ì¸ ì„±ê³µğŸ˜`;
        } else {
          resultBox2.textContent = `ì•„ì´ë”” ë˜ëŠ” íŒ¨ìŠ¤ì›Œë“œ ì˜¤ë¥˜ğŸ˜¥`
        }
      })
      resultBox2.style.color = 'blue';
    }
    
    const userId = 'apple';
    const pw = 1111;

  </script>
</body>
</html>